{% load static %}
{% load tailwind_tags %}

{% load i18n %}

<!doctype html>
<html class="overflow-x-hidden" lang="en">

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" rel="stylesheet">
    {% tailwind_css %}
    <script src="{% static "js/cdn.min.js" %}" defer></script>
    {% block head %}{% endblock %}

    <title>ASF Risk Manager</title>

</head>


<body class="flex flex-col h-screen bg-white">
<header class="print:hidden">
    <nav class="flex flex-wrap justify-between bg-gray-800 shadow w-screen items-center p-1">
        <a id="homepage" href="/" class="mx-2 my-auto sm:mx-8 flex flex-shrink-0">
            <svg width="30" viewBox="0 0 512.073 512.073" xmlns="http://www.w3.org/2000/svg" class="w-5"><g><path d="m72.834 105.554 47.223 153.945 214.993-40.183-79.014-190.822c-71.784 0-136.665 29.516-183.202 77.06z" fill="#ffcb00"/><path d="m12.644 284.856h73.29l68.609-94.987 1.964-.642-83.673-83.673c-42.341 43.256-69.499 101.434-72.817 165.919-.373 7.264 5.354 13.383 12.627 13.383z" fill="#ace233"/><path d="m512.055 271.474c-3.312-64.367-30.375-122.449-72.582-165.681l-189.38 89.531 175.858 89.531h73.477c7.273.001 13.001-6.117 12.627-13.381z" fill="#e20059"/><path d="m256.036 28.494v128.181l91.281 33.195 3.659 4.42 88.496-88.496c-46.553-47.684-111.531-77.3-183.436-77.3z" fill="#ff9d21"/><path d="m256.036 117.424c-36.904 0-72.341 12.613-100.207 32.592l-36.426 36.227c-20.148 27.936-33.33 64.07-33.33 101.144 0 51.757 22.051 97.236 58.543 128.41l114.572 35.267 108.208-35.272c37.178-31.177 58.604-76.088 58.604-128.405 0-93.868-76.096-169.963-169.964-169.963z" fill="#fff5f5"/><path d="m256.867 117.424v332.916l2.32.714 108.208-35.271c37.179-31.179 58.605-76.089 58.605-128.406 0-93.59-75.648-169.504-169.133-169.953z" fill="#eceae7"/><path d="m159.717 152.512c-10.701-8.338-25.939-7.396-35.532 2.197-9.545 9.545-10.531 24.687-2.306 35.39l94.904 123.492 68.675-63.105z" fill="#004960"/><path d="m256.867 276.759 28.591-26.271-28.591-22.277z" fill="#003140"/><path d="m121.834 483.579h268.405c6.984 0 12.646-5.662 12.646-12.646v-42.485c0-6.984-5.662-12.646-12.646-12.646h-268.405c-6.984 0-12.646 5.662-12.646 12.646v42.485c0 6.984 5.662 12.646 12.646 12.646z" fill="#004960"/><path d="m390.239 415.803h-133.372v67.776h133.371c6.984 0 12.646-5.662 12.646-12.646v-42.485c0-6.983-5.661-12.645-12.645-12.645z" fill="#003140"/><circle cx="256.052" cy="287.403" fill="#45f6ff" r="47.194"/><path d="m256.867 240.209v94.348c25.687-.437 46.379-21.382 46.379-47.174s-20.692-46.738-46.379-47.174z" fill="#5ecbf1"/></g></svg>
            <span class="tracking-tight ml-2 text-sm sm:text-lg font-semibold text-white hover:text-gray-300">ASF Risk Manager</span>
        </a>
        <div class="flex flex-grow">
            <search class="flex-grow ml-0 mr-4">
                <form action="{% url 'search' %}" class="">
                    <span class="h-10 m-0 bg-gray-200 hover:bg-gray-300 cursor-pointer border border-gray-300 text-sm rounded-full flex">
                        <input id="search" required type="search" name="q" placeholder="{% trans "Search Risk instance, mitigation, analysis ..." %}" value="{{request.GET.q}}"
                                class="flex-grow px-4 rounded-l-full rounded-r-full text-sm focus:outline-none border-none overflow-ellipsis">
                        <button id="submit" type="submit" class="text-gray-700">
                                <i class="fas fa-search text-lg w-4 h-4 ml-2 mr-4"></i>
                        </button>
                    </span>
                </form>
            </search>
            <div class="mr-5 my-auto sm:hidden border border-gray-300 py-2 px-3 rounded-lg">
                <i class="fas fa-bars text-gray-100"></i>
            </div>
        </div>
        <div class="justify-between w-auto pl-0 pr-2 pb-0 hidden sm:flex">
            <a id="edit" href="/admin/" class="px-2 py-2 m-2 text-center text-white hover:text-gray-300">
                <i class="fas fa-edit"></i> {% trans "Edit" %}</a>
            <a id="analytics" href="{% url 'analytics' %}" class="px-2 py-2 m-2 text-center text-white hover:text-gray-300">
                <i class="fas fa-chart-pie"></i> {% trans "Analytics" %}
            </a>
            <a id="myprojects" href="{% url 'my_projects' %}" class="px-2 py-2 m-2 text-center text-white hover:text-gray-300">
                <i class="fas fa-star"></i> {% trans "My Projects" %}
            </a>
            <a  id="calendar" href="{% url 'calendar' %}" class="px-2 py-2 m-2 text-center text-white hover:text-gray-300">
                <i class="fas fa-calendar-alt"></i> {% trans "Calendar" %}
            </a>
            <a  id="composer" href="{% url 'composer' %}" class="px-2 py-2 m-2 text-center text-white hover:text-gray-300">
                 <i class="fas fa-drafting-compass"></i> {% trans "Composer" %}
            </a>


            <div class="flex justify-center m-2">
                <div x-data="{ dropdownOpen: false }" class="relative">
                    <button id="more" @click="dropdownOpen = !dropdownOpen"
                            class="relative z-10 block rounded-md  text-white hover:text-gray-300 px-2 py-2 focus:outline-none">
                        {% trans "More" %}
                        <i class="fas fa-angle-down"></i>
                    </button>

                    <div x-show="dropdownOpen" @click="dropdownOpen = false"
                         class="fixed inset-0 h-full w-full z-10"></div>

                    <div x-show="dropdownOpen"
                         class="absolute right-0 mt-2 py-2 w-48 bg-white rounded-md shadow-xl z-20">
                        <a class="block px-4 py-2 text-sm capitalize text-gray-700 border-b">
                            {% if user.is_authenticated %}
                            <i class="fas fa-user-circle"></i> {% trans "Hello" %}, {{user}}
                            {% else %}
                            {% trans "You're not logged in" %}
                            {% endif %}
                        </a>
                        <a href="{% url 'xrays' %}"
                           class="block px-4 py-2 text-sm capitalize text-gray-700 hover:bg-blue-500 hover:text-white">
                            <i id="xrays" class="fas fa-bolt"></i> {% trans "X-Rays (my projects)" %}
                        </a>
                        <a href="{% url 'scoring' %}"
                           class="block px-4 py-2 text-sm capitalize text-gray-700 hover:bg-blue-500 hover:text-white">
                            <i id="scoring" class="fas fa-compass"></i> {% trans "Scoring assistant" %}
                        </a>
                        <a href="{% url 'matrix' %}"
                           class="block px-4 py-2 text-sm capitalize text-gray-700 hover:bg-blue-500 hover:text-white border-b">
                            <i id="riskmatrix" class="fas fa-border-all"></i> {% trans "Risk Matrix" %}
                        </a>
                        <a class="block px-4 py-2 text-sm capitalize text-gray-700 border-b">
                            <i id="translation" class="fas fa-language"></i> {% trans "Language" %}

                            <form action="{% url 'set_language' %}" method="post">
                                {% csrf_token %}
                                <select id="language" class="w-full border-none block px-4 py-2 text-sm capitalize text-gray-700 hover:bg-blue-500 hover:text-white" name="language" onchange="this.form.submit();"> 
                                    {% get_current_language as LANGUAGE_CODE %} 
                                    {% get_available_languages as LANGUAGES %}
                                    {% get_language_info_list for LANGUAGES as languages %}
                                    {% for language in languages %}
                                        <option value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected {% endif %}> 
                                            {{ language.name_local }} ({{ language.code }})
                                        </option>
                                    {% endfor %}
                                </select>
                            </form>
                        </a>
                        {% if user.is_authenticated %}
                        <a  id="signout"
                            href="{% url 'logout' %}"
                           class="block px-4 py-2 text-sm capitalize text-gray-700 hover:bg-blue-500 hover:text-white">
                            <i class="fas fa-sign-in-alt"></i> {% trans "Sign Out" %}
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </nav>
    


</header>

{% block content %}{% endblock %}


</body>




</html>
